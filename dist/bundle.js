(()=>{"use strict";var t,e=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)},function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),n=function(t,e,n){this.container=t,this.id=e,this.displayName=n},r=function(t){function n(e,n,r){var i=t.call(this,e,n,r)||this;return i._items=[],i.loadItems(),i}return e(n,t),Object.defineProperty(n.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t,localStorage[this.id]=JSON.stringify(this._items)},enumerable:!1,configurable:!0}),n.prototype.loadItems=function(){localStorage[this.id]&&(this._items=JSON.parse(localStorage[this.id]))},n.prototype.addItem=function(t){this._items.push(t),localStorage[this.id]=JSON.stringify(this._items)},n.prototype.removeItem=function(t){this._items.splice(t,1),localStorage[this.id]=JSON.stringify(this._items)},n}(n),i=function(t){return("0"+t).slice(-2)};function o(t){return{fullText:t.getFullYear()+"년 "+(t.getMonth()+1)+"월 "+t.getDate()+"일 "+i(t.getHours())+"시 "+i(t.getMinutes())+"분 "+i(t.getSeconds())+"초",ISOString:t.toISOString()}}var a=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const s=function(t){function e(e){var n=t.call(this,e,"alarm","알람")||this;return n.addPanelVisible=!1,n.removeButtonClickHandler=function(t){var e=t.target,r=Number(e.dataset.itemId);n.removeItem(r),n.render()},n.onAddFormSubmit=function(t){t.preventDefault();var e=t.target,r=e.querySelector("[name=ampm]").value,i=e.querySelector("[name=hours]").value,o=e.querySelector("[name=minutes]").value,a="AM"===r.toUpperCase(),s=Number(i),c=Number(o);return n.addItem({isAM:a,hours:s,minutes:c}),n.addPanelVisible=!1,n.render(),!1},n}return a(e,t),e.prototype.checkTime=function(t){for(var n=e.convertDateToAlarmTime(t),r=0;r<this.items.length;r++)if(JSON.stringify(this.items[r])===JSON.stringify(n))return alert(e.getTimeText(n)),this.removeItem(r),!0;return!1},e.convertDateToAlarmTime=function(t){var e=t.getHours(),n=t.getMinutes(),r={};return 0===e?(r.isAM=!1,r.hours=12,r.minutes=n):e>12?(r.isAM=!1,r.hours=e-12,r.minutes=n):(r.isAM=!0,r.hours=e,r.minutes=n),r},e.getTimeText=function(t){return(t.isAM?"오전":"오후")+" "+i(t.hours)+"시 "+i(t.minutes)+"분"},e.prototype.showAddPanel=function(){this.addPanelVisible=!0,this.render()},e.prototype.getAddPanel=function(){var t=document.createElement("form");t.id="alarm-form",t.dataset.testid="alarm-form",t.addEventListener("submit",this.onAddFormSubmit);var e=document.createElement("select");e.setAttribute("name","ampm"),e.innerHTML='\n      <option value="am">오전</option>\n      <option value="pm">오후</option>\n    ';var n=document.createElement("select");n.setAttribute("name","hours"),Array.from(new Array(12),(function(t,e){var r=document.createElement("option");r.setAttribute("value",String(e+1)),r.textContent=i(e+1),n.appendChild(r)}));var r=document.createElement("label");r.appendChild(n),r.appendChild(document.createTextNode("시"));var o=document.createElement("select");o.setAttribute("name","minutes"),Array.from(new Array(6),(function(t,e){var n=document.createElement("option");n.setAttribute("value",String(10*e)),n.textContent=i(10*e),o.appendChild(n)}));var a=document.createElement("label");a.appendChild(o),a.appendChild(document.createTextNode("분"));var s=document.createElement("button");s.setAttribute("type","submit"),s.textContent="저장";var c=document.createElement("div");return c.classList.add("input-area"),c.appendChild(e),c.appendChild(r),c.appendChild(a),t.appendChild(c),t.appendChild(s),t},e.prototype.getItemListContainer=function(){var t=this,n=document.createElement("ul");return n.id="alarm-list",n.dataset.testid="alarm-list",this.items.forEach((function(r,o){var a=document.createElement("li"),s=document.createElement("time");s.setAttribute("datetime",i(r.hours)+":"+i(r.minutes)),s.textContent=e.getTimeText(r),a.appendChild(s);var c=document.createElement("button");c.dataset.itemId=String(o),c.textContent="삭제",c.addEventListener("click",t.removeButtonClickHandler),a.appendChild(c),n.appendChild(a)})),n},e.prototype.render=function(){if(this.container.innerHTML="",!0===this.addPanelVisible){var t=this.getAddPanel();this.container.appendChild(t)}var e=this.getItemListContainer();this.container.appendChild(e)},e}(r);var c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const d=function(t){function e(e){var n=t.call(this,e,"memo","메모")||this;return n.addPanelVisible=!1,n.onAddFormSubmit=function(t){t.preventDefault();var e=t.target.querySelector("[name=content]").value.trim();return n.addItem({content:e}),n.addPanelVisible=!1,n.render(),!1},n.handleMemoClick=function(t){var e=t.target.parentElement,n=e.parentElement.children;Array.prototype.forEach.call(n,(function(t){t.classList.remove("active")})),e.classList.add("active")},n}return c(e,t),e.prototype.showAddPanel=function(){this.addPanelVisible=!0,this.render()},e.prototype.getAddPanel=function(){var t=document.createElement("form");t.id="memo-form",t.dataset.testid="memo-form",t.addEventListener("submit",this.onAddFormSubmit);var e=document.createElement("input");return e.setAttribute("type","text"),e.setAttribute("name","content"),e.setAttribute("placeholder","메모를 입력하세요"),t.append(e),t},e.prototype.getItemListContainer=function(){var t=this,e=document.createElement("ul");return e.id="memo-list",e.dataset.testid="memo-list",this.items.forEach((function(n,r){var i=document.createElement("li"),o=document.createElement("button");o.textContent=n.content,o.addEventListener("click",t.handleMemoClick),i.appendChild(o),e.appendChild(i)})),e},e.prototype.render=function(){if(this.container.innerHTML="",!0===this.addPanelVisible){var t=this.getAddPanel();this.container.appendChild(t)}var e=this.getItemListContainer();this.container.appendChild(e)},e}(r);var p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=[{title:"석양과 함께있는 에펠탑",src:"images/1.jpg"},{title:"석양에 겹친 나무",src:"images/2.jpg"},{title:"3명이 멋진배경과 함께 농구",src:"images/3.jpg"},{title:"별똥별 타임랩스",src:"images/4.jpg"},{title:"달에비춰지는 사람의 실루엣",src:"images/5.jpg"},{title:"손하트로 태양품기",src:"images/6.jpg"},{title:"알록달록한 석양",src:"images/7.jpg"},{title:"밤하늘 속에서 울부짓는 늑대",src:"images/8.jpg"},{title:"개기일식 직전",src:"images/9.jpg"},{title:"태양을 머금은 파도",src:"images/10.jpg"},{title:"선물을 주고받는 두 여자의 우정",src:"images/11.jpg"}];const u=function(t){function e(e){var n=t.call(this,e,"photo","사진")||this;return n.selectedItem=0,n.handleItemClick=function(t){var e=t.currentTarget.parentElement,r=Number(e.dataset.itemId);n.selectedItem=r;var i=e.parentElement.children;Array.prototype.forEach.call(i,(function(t){t.classList.remove("selected")})),e.classList.add("selected"),n.renderPhotoView()},n.photoViewContainer=document.createElement("figure"),n.photoViewContainer.id="photo-view",n.photoViewContainer.dataset.testid="photo-view",n.loadItems(),n}return p(e,t),e.prototype.loadItems=function(){this.items=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(l)},e.prototype.getItemListContainer=function(){var t=this,e=document.createElement("ul");return e.id="photo-list",e.dataset.testid="photo-list",this.items.forEach((function(n,r){var i=document.createElement("li");r===t.selectedItem&&i.classList.add("selected"),i.dataset.itemId=String(r),i.dataset.testid="photo-item";var o=document.createElement("button");o.addEventListener("click",t.handleItemClick);var a=document.createElement("img");a.setAttribute("src",n.src),a.setAttribute("alt",n.title),o.appendChild(a),i.appendChild(o),e.appendChild(i)})),e},e.prototype.renderPhotoView=function(){this.photoViewContainer.innerHTML="";var t=this.items[this.selectedItem];this.photoViewContainer.setAttribute("style","background: url("+t.src+") #000 no-repeat center; background-size: contain;");var e=document.createElement("img");e.setAttribute("src",t.src),e.setAttribute("alt",t.title),e.classList.add("a11yHidden");var n=document.createElement("figcaption");n.textContent="선택된 사진",n.classList.add("a11yHidden"),this.photoViewContainer.appendChild(e),this.photoViewContainer.appendChild(n)},e.prototype.render=function(){this.container.innerHTML="";var t=this.getItemListContainer(),e=this.photoViewContainer;this.container.appendChild(t),this.container.appendChild(e),this.renderPhotoView()},e}(r);var m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const h=function(t){function e(e){var n=t.call(this,e,"home","홈")||this;return n.apps={},n.timerID=null,n.selectedApp=n.id,n.handleAppClick=function(t){var e=t.currentTarget.parentElement.dataset.appId;n.appExecute(e)},n.handleBackButtonClick=function(){n.selectedApp=n.id,n.render()},n.handleAddButtonClick=function(){n.apps[n.selectedApp].showAddPanel()},n.handleAppDrag=function(t){var e,n=t.currentTarget,r=n.parentNode,i=t.clientX,o=t.clientY;n.classList.add("drag-sort-active");var a=null===(e=document.elementFromPoint(i,o))||void 0===e?void 0:e.parentElement,s="true"===(null==a?void 0:a.getAttribute("draggable"))&&"app-list"===(null==a?void 0:a.parentElement.id)?a:n;r===s.parentNode&&(s=s!==n.nextSibling?s:s.nextSibling,r.insertBefore(n,s))},n.handleAppDrop=function(t){var e=t.currentTarget;e.classList.remove("drag-sort-active"),localStorage[n.id]=JSON.stringify(Array.prototype.map.call(e.parentElement.children,(function(t){return t.dataset.appId})))},n.mainContainer=document.createElement("main"),[new s(n.mainContainer),new d(n.mainContainer),new u(n.mainContainer)].forEach((function(t){n.apps[t.id]=t})),localStorage[n.id]?n.appOrder=JSON.parse(localStorage[n.id]):n.appOrder=Object.keys(n.apps),n}return m(e,t),Object.defineProperty(e.prototype,"appOrder",{get:function(){return this._appOrder},set:function(t){this._appOrder=t,localStorage[this.id]=JSON.stringify(t)},enumerable:!1,configurable:!0}),e.prototype.appExecute=function(t){this.selectedApp=t,this.render()},e.prototype.updateTime=function(t){var e=this,n=o(new Date),r=n.fullText,i=n.ISOString;t.textContent=r,t.setAttribute("datetime",i),window.clearTimeout(this.timerID),this.timerID=window.setInterval((function(){var n=new Date,r=o(n),i=r.fullText,a=r.ISOString;t.textContent=i,t.setAttribute("datetime",a),Object.values(e.apps).forEach((function(t){t instanceof s&&t.checkTime(n)&&e.selectedApp===t.id&&e.apps[e.selectedApp].render()}))}),1e3)},e.prototype.getHeaderContainer=function(){var t=document.createElement("header");if(t.dataset.testid="header-bar",this.selectedApp!==this.id){var e=document.createElement("button");e.textContent="BACK",e.addEventListener("click",this.handleBackButtonClick),t.appendChild(e)}var n=document.createElement("time");if(this.updateTime(n),t.appendChild(n),this.selectedApp!==this.id&&"showAddPanel"in this.apps[this.selectedApp]){var r=document.createElement("button");r.textContent="NEW",r.addEventListener("click",this.handleAddButtonClick),t.appendChild(r)}return t},e.prototype.mousedown=function(t){console.log("mousedown",t)},e.prototype.renderAppList=function(){var t=this;this.mainContainer.innerHTML="";var e=document.createElement("ul");e.id="app-list",this.appOrder.forEach((function(n){var r=t.apps[n],i=document.createElement("li");i.dataset.appId=r.id,i.setAttribute("draggable","true"),i.addEventListener("drag",t.handleAppDrag),i.addEventListener("dragend",t.handleAppDrop);var o=document.createElement("button");o.textContent=r.displayName,o.addEventListener("click",t.handleAppClick),i.appendChild(o),e.appendChild(i)})),this.mainContainer.appendChild(e)},e.prototype.render=function(){var t=this.getHeaderContainer(),e=this.mainContainer;this.container.innerHTML="",this.container.appendChild(t),this.container.appendChild(e),this.selectedApp===this.id?this.renderAppList():this.apps[this.selectedApp].render()},e}(n);var f=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",f+"px"),window.addEventListener("resize",(function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",t+"px")})),new h(document.getElementById("root")).render()})();